<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ForaOS - API Key Configuration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .container {
            background: #2a2a2a;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 0;
        }
        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #555;
            border-radius: 5px;
            background: #333;
            color: #fff;
        }
        button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success {
            background: #28a745;
        }
        .error {
            background: #dc3545;
        }
        .warning {
            background: #ffc107;
            color: #000;
        }
        code {
            background: #333;
            padding: 2px 5px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîë ForaOS API Key Configuration</h1>
        <p>Configure your API keys to enable AI features. These keys are stored locally in your browser and never sent to our servers.</p>
        
        <div class="status warning">
            <strong>‚ö†Ô∏è Important:</strong> Never share your API keys with anyone. They are stored locally in your browser only.
        </div>
        
        <form id="apiForm">
            <h3>OpenAI API Key</h3>
            <p>Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank" style="color: #007bff;">OpenAI Platform</a></p>
            <input type="text" id="openaiKey" placeholder="sk-proj-..." />
            
            <h3>ElevenLabs API Key</h3>
            <p>Get your API key from <a href="https://elevenlabs.io/app/settings/api-keys" target="_blank" style="color: #007bff;">ElevenLabs Settings</a></p>
            <input type="text" id="elevenlabsKey" placeholder="Your ElevenLabs API key" />
            
            <button type="submit">Save API Keys</button>
            <button type="button" onclick="clearKeys()">Clear Keys</button>
            <button type="button" onclick="testKeys()">Test Keys</button>
        </form>
        
        <div id="status"></div>
        
        <div class="container">
            <h3>üìã How to Use</h3>
            <ol>
                <li>Enter your API keys above</li>
                <li>Click "Save API Keys" to store them locally</li>
                <li>Click "Test Keys" to verify they work</li>
                <li>Go back to the main ForaOS application</li>
            </ol>
            
            <h3>üîß For Developers</h3>
            <p>API keys are stored in <code>localStorage</code> and can be accessed via:</p>
            <pre><code>window.API_KEYS = {
    openai: { apiKey: "your-key-here" },
    elevenlabs: { apiKey: "your-key-here" }
}</code></pre>
        </div>
    </div>

    <script>
        // Load existing keys
        function loadKeys() {
            const keys = JSON.parse(localStorage.getItem('foraos_api_keys') || '{}');
            document.getElementById('openaiKey').value = keys.openai?.apiKey || '';
            document.getElementById('elevenlabsKey').value = keys.elevenlabs?.apiKey || '';
        }
        
        // Save keys
        function saveKeys() {
            const keys = {
                openai: {
                    apiKey: document.getElementById('openaiKey').value.trim()
                },
                elevenlabs: {
                    apiKey: document.getElementById('elevenlabsKey').value.trim()
                }
            };
            
            localStorage.setItem('foraos_api_keys', JSON.stringify(keys));
            
            // Also set in window for immediate use
            window.API_KEYS = keys;
            
            showStatus('API keys saved successfully!', 'success');
        }
        
        // Clear keys
        function clearKeys() {
            localStorage.removeItem('foraos_api_keys');
            window.API_KEYS = null;
            document.getElementById('openaiKey').value = '';
            document.getElementById('elevenlabsKey').value = '';
            showStatus('API keys cleared!', 'warning');
        }
        
        // Test keys
        async function testKeys() {
            const keys = JSON.parse(localStorage.getItem('foraos_api_keys') || '{}');
            
            if (!keys.openai?.apiKey) {
                showStatus('No OpenAI API key configured', 'error');
                return;
            }
            
            showStatus('Testing API keys...', 'warning');
            
            try {
                // Test OpenAI API
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${keys.openai.apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [{ role: 'user', content: 'Hello' }],
                        max_tokens: 10
                    })
                });
                
                if (response.ok) {
                    showStatus('‚úÖ API keys are working correctly!', 'success');
                } else {
                    showStatus('‚ùå API key test failed. Check your keys.', 'error');
                }
            } catch (error) {
                showStatus('‚ùå API test failed: ' + error.message, 'error');
            }
        }
        
        // Show status message
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }
        
        // Form submission
        document.getElementById('apiForm').addEventListener('submit', function(e) {
            e.preventDefault();
            saveKeys();
        });
        
        // Load keys on page load
        loadKeys();
        
        // Load keys into window object for immediate use
        const savedKeys = JSON.parse(localStorage.getItem('foraos_api_keys') || '{}');
        if (savedKeys.openai?.apiKey || savedKeys.elevenlabs?.apiKey) {
            window.API_KEYS = savedKeys;
        }
    </script>
</body>
</html>
